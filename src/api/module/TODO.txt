Добавить валидацию к получаемым файлам к примеру с помощью zod(https://github.com/colinhacks/zod)
Посмотреть конференцию Преломление реальности: динамическая валидация статическими типами / Майк Башуров: https://www.youtube.com/watch?v=pjF6LecX8gc